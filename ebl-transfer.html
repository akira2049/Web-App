<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>EBL Account Transfer ‚Äî Step 1</title>

  <!-- Admin CSS -->
  <link rel="stylesheet" href="dashboard.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

  <!-- Transfer UI CSS -->
  <link rel="stylesheet" href="transfer.css">

  <style>
    .admin-content { width:100%; padding:24px; }
    .app { max-width:720px; margin:0 auto; }

    /* small search field styling to match inputs */
    .search-input {
      margin-bottom: 8px;
      width: 100%;
    }
  </style>
</head>

<body>
<div class="admin-layout">

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="side-header">
      <h2>Admin Panel</h2>
    </div>
    <nav class="side-nav">
      <a href="admin_dashboard.php"><i class="fa-solid fa-gauge"></i> Dashboard</a>
      <a href="admin_overview.php"><i class="fa-solid fa-table"></i> Overview</a>
      <a href="fund-transfer.php"><i class="fa-solid fa-money-bill-transfer"></i> Fund Transfer</a>
      <a href="mfs-transfer.php"><i class="fa-solid fa-wallet"></i> MFS Transfer</a>
      <a href="admin_logout.php"><i class="fa-solid fa-right-from-bracket"></i> Logout</a>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="admin-content">

    <div class="app">
      <div class="topbar">
        <a class="linkish" href="fund-transfer.php">‚Üê Back</a>
        <span class="step">1 / 2</span>
      </div>

      <div class="h1">EBL Account Transfer</div>

      <div class="card">
        <div class="section">

          <!-- Transfer From -->
          <div class="row">
            <div class="label">Transfer From</div>
            <select id="fromAcc">
              <option>Acc. 14512400000072</option>
              <option>Acc. 14512400000073</option>
            </select>
          </div>

          <!-- Transfer To (Beneficiary) -->
          <div class="row">
            <div class="label">Transfer To (Beneficiary)</div>
            <div>

              <!-- Search input with datalist -->
              <input
                class="input search-input"
                id="beneficiarySearch"
                list="allAccounts"
                placeholder="Search account number..."
              />

              <datalist id="allAccounts">
                <?php foreach ($accounts as $a): ?>
                  <option value="<?= htmlspecialchars($a['acc']) ?>">
                <?php endforeach; ?>
              </datalist>

              <!-- Dropdown containing all accounts -->
              <select id="beneficiarySelect" class="input">
                <option value="">Select beneficiary</option>
                <?php foreach ($accounts as $a): ?>
                  <option
                    value="<?= htmlspecialchars($a['acc']) ?>"
                    data-name="<?= htmlspecialchars($a['name']) ?>"
                    data-mask="<?= htmlspecialchars($a['mask']) ?>"
                  >
                    <?= htmlspecialchars($a['mask']) ?>
                    <?= $a['name'] ? " | ".$a['name'] : "" ?>
                  </option>
                <?php endforeach; ?>
              </select>

            </div>
          </div>

          <!-- Account Holder -->
          <div class="row">
            <div class="label">Account Holder</div>
            <div class="ahd" id="holderInfo" style="display:none;">
              <div style="font-size:28px">üë§</div>
              <div>
                <div class="name" id="ahName"></div>
                <div class="kv">To Acc: <span class="mask" id="ahAcc"></span></div>
              </div>
            </div>
          </div>

          <!-- Amount -->
          <div class="row">
            <div class="label">Transfer Amount</div>
            <div>
              <input class="input" id="amount" type="number" inputmode="decimal" placeholder="‡ß≥ 0.00">
              <div class="amounts" style="margin-top:10px">
                <button class="chip" data-a="500">‡ß≥ 500</button>
                <button class="chip" data-a="5000">‡ß≥ 5000</button>
                <button class="chip" data-a="10000">‡ß≥ 10000</button>
                <button class="chip" data-a="20000">‡ß≥ 20000</button>
              </div>
            </div>
          </div>

          <!-- Notes -->
          <div class="row">
            <div class="label">Notes</div>
            <input class="input" placeholder="EBL Transfer">
          </div>

          <div class="footerbar">
            <a class="btn" id="next" href="ebl-transfer-overview.php">Next</a>
          </div>

        </div>
      </div>
    </div>

  </main>
</div>

<script>

  const beneSearch  = document.getElementById("beneficiarySearch");
  const beneSelect  = document.getElementById("beneficiarySelect");
  const holderInfo  = document.getElementById("holderInfo");
  const ahName      = document.getElementById("ahName");
  const ahAcc       = document.getElementById("ahAcc");

  function showHolder(accNo) {
    const found = accounts.find(a => a.acc === accNo);
    if (found) {
      ahName.textContent = found.name || "Selected Beneficiary";
      ahAcc.textContent  = found.acc;
      holderInfo.style.display = "flex";
    } else {
      holderInfo.style.display = "none";
    }
  }

  // When dropdown changes -> update search + holder
  beneSelect.addEventListener("change", () => {
    beneSearch.value = beneSelect.value;
    showHolder(beneSelect.value);
  });

  // When search changes -> auto select matching dropdown option
  beneSearch.addEventListener("input", () => {
    const val = beneSearch.value.trim();
    beneSelect.value = val;
    showHolder(val);
  });

  // quick amount chips
  document.querySelectorAll('.chip').forEach(c=>{
    c.addEventListener('click', ()=>{
      document.getElementById('amount').value = c.dataset.a;
    });
  });
</script>

</body>
</html>